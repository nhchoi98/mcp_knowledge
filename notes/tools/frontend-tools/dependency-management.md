---
title: Dependancy ê´€ë¦¬
tags: []
created: ""
updated: ""
source: ""
status: draft
---
# Dependancy ê´€ë¦¬

# íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë€?

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì˜ì¡´í•˜ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(íŒ¨í‚¤ì§€)ë¥¼ **ì°¾ê³ (ê²€ìƒ‰/ë ˆì§€ìŠ¤íŠ¸ë¦¬), ì„¤ì¹˜í•˜ê³ (ì˜ì¡´ì„± í•´ì„), ë²„ì „ ê³ ì •í•˜ê³ (ì ê¸ˆ íŒŒì¼), ì—…ë°ì´íŠ¸í•˜ê³ (í˜¸í™˜ì„± ì ê²€), ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‘ì—…ì„ ìë™í™”**í•˜ê²Œ í•´ì£¼ëŠ” ë„êµ¬ì˜ˆìš”.

ëŒ€í‘œì ìœ¼ë¡œ **npm, Yarn, pnpm**ì´ ìˆê³ , ëª¨ë‘ Node.js ìƒíƒœê³„ì˜ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.

## íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ í•˜ëŠ” ì¼

- **ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì—°ë™:** ì¤‘ì•™ ì €ì¥ì†Œ(Registry)ì—ì„œ íŒ¨í‚¤ì§€ ë©”íƒ€ë°ì´í„°/ì•„ì¹´ì´ë¸Œë¥¼ ë‹¤ìš´ë¡œë“œ.
- **ì˜ì¡´ì„± í•´ì„/ì„¤ì¹˜:** `package.json`ì˜ dependencies/peerDependencies ë“±ì„ ì½ì–´ **í˜¸í™˜ ê°€ëŠ¥í•œ ë²„ì „ ê·¸ë˜í”„**ë¥¼ ë§Œë“¤ê³  `node_modules`ì— ë°°ì¹˜.
- **ë²„ì „ ê´€ë¦¬(semver):** `^1.2.3`, `~1.2.3`, `1.2.x` ê°™ì€ **ì˜ë¯¸ì  ë²„ì „(semver)** ë²”ìœ„ë¥¼ í•´ì„.
- **ì¬í˜„ì„± ë³´ì¥:** ì ê¸ˆ íŒŒì¼(ì˜ˆ: `package-lock.json`, `yarn.lock`)ë¡œ ë™ì¼í•œ ë²„ì „ íŠ¸ë¦¬ë¥¼ ì–´ë””ì„œë‚˜ ì¬í˜„.
- **ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰:** `npm run build`ì²˜ëŸ¼ **ê°œë°œÂ·ë¹Œë“œÂ·í…ŒìŠ¤íŠ¸** ì‘ì—…ì„ ìŠ¤í¬ë¦½íŠ¸ë¡œ í‘œì¤€í™”.
- **ë³´ì•ˆ/í’ˆì§ˆ:** ì·¨ì•½ì  ì ê²€, ë¬´ê²°ì„± ì²´í¬, ì„œë¸Œë””íœë˜ì‹œ(íŠ¸ëœì§€í‹°ë¸Œ) ê°•ì œ ê³ ì • ë“±.
- **ëª¨ë…¸ë ˆí¬ ì§€ì›:** ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë¥¼ í•˜ë‚˜ì˜ ì €ì¥ì†Œì—ì„œ ê´€ë¦¬(Workspaces)

## ë²„ì „íŠ¸ë¦¬

íŒ¨í‚¤ì§€ ì˜ì¡´ì„±ë“¤ì´ ì–´ë–»ê²Œ ì—°ê²°ë˜ê³ , ì–´ë–¤ ë²„ì „ì´ ì‹¤ì œë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ êµ¬ì¡°í™”í•œ ê²ƒì„ ëœ»í•´ìš”.

### ë²„ì „ íŠ¸ë¦¬ì™€ lockfile

- `package-lock.json` (npm), `yarn.lock` (Yarn), `pnpm-lock.yaml` (pnpm)ì€ ì´ **ë²„ì „ íŠ¸ë¦¬ ì „ì²´ë¥¼ ê¸°ë¡í•œ ìŠ¤ëƒ…ìƒ·**ì´ì—ìš”.
- ê·¸ë˜ì„œ íŒ€ì›ì´ë‚˜ CI/CD í™˜ê²½ì—ì„œ `npm install`ì„ í•´ë„, ë™ì¼í•œ ë²„ì „ íŠ¸ë¦¬ê°€ ì¬í˜„ë¼ìš”.

### ë²„ì „ íŠ¸ë¦¬ì—ì„œ ìƒê¸°ëŠ” ë¬¸ì œ

1. **ì¤‘ë³µ ì„¤ì¹˜**
    - ê°™ì€ íŒ¨í‚¤ì§€ê°€ ì—¬ëŸ¬ ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìš©ëŸ‰ ì¦ê°€.
    - ì˜ˆ: `lodash@4.17.21`, `lodash@4.17.20`ì´ ë™ì‹œì— ìˆìŒ.
2. **í˜¸í™˜ì„± ì¶©ëŒ**
    - AëŠ” `react@17`ì„ ìš”êµ¬, BëŠ” `react@18`ì„ ìš”êµ¬ â†’ ì¶©ëŒ ë°œìƒ.
3. **ë³´ì•ˆ ì·¨ì•½ ë²„ì „ í¬í•¨**
    - í•˜ìœ„ ì˜ì¡´ì„± ì¤‘ ì˜¤ë˜ëœ ë²„ì „ì´ ê·¸ëŒ€ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŒ.

### í•´ê²° ë°©ë²•

- **hoisting** (npm, Yarn, pnpm): ë™ì¼í•œ ë²„ì „ì„ ë£¨íŠ¸ë¡œ ëŒì–´ì˜¬ë ¤ ì¤‘ë³µ ìµœì†Œí™”.
- **dedupe**: ì¤‘ë³µëœ ì˜ì¡´ì„±ì„ ì •ë¦¬.
- **overrides / resolutions**: íŠ¹ì • ë²„ì „ì„ ê°•ì œë¡œ ì§€ì •.
- **lockfile ìœ ì§€**: ë²„ì „ íŠ¸ë¦¬ë¥¼ ê³ ì •í•´ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ê´€ë¦¬.

### **Hoisting (í˜¸ì´ìŠ¤íŒ…)**

 íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ `node_modules`ë¥¼ ë§Œë“¤ ë•Œ, **ì—¬ëŸ¬ íŒ¨í‚¤ì§€ê°€ ê³µí†µìœ¼ë¡œ ì“°ëŠ” ì˜ì¡´ì„±ì„ ë” ìœ„(ë£¨íŠ¸ ìª½)ë¡œ ëŒì–´ì˜¬ë ¤ í•œ ë²ˆë§Œ ì„¤ì¹˜**í•˜ë ¤ëŠ” ë™ì‘ì„ ë§í•´ìš”. ê°„ë‹¨íˆ ë§í•´ â€œì¤‘ë³µì„ ì¤„ì´ê³ , Nodeì˜ **ìƒìœ„ í´ë” íƒìƒ‰ ê·œì¹™**ì„ ì´ìš©í•´ ê³µìœ â€í•˜ëŠ” ì „ëµì…ë‹ˆë‹¤.

### ê°œë…

- `node_modules`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ íŠ¸ë¦¬ êµ¬ì¡°ì˜ˆìš”.
- í•˜ì§€ë§Œ ê°™ì€ íŒ¨í‚¤ì§€ì˜ ê°™ì€ ë²„ì „ì´ ì—¬ëŸ¬ êµ°ë° ì„¤ì¹˜ë˜ë©´ **ì¤‘ë³µ**ì´ ìƒê²¨ìš”.
- Hoistingì€ **ì¤‘ë³µëœ íŒ¨í‚¤ì§€ë¥¼ ë£¨íŠ¸ `node_modules`ë¡œ ëŒì–´ì˜¬ë ¤ í•œ ë²ˆë§Œ ì„¤ì¹˜**í•˜ëŠ” ë°©ì‹ì´ì—ìš”.

### ìœ ë ¹ ì˜ì¡´ì„±(**Phantom Dependency)**

ìœ ë ¹ ì˜ì¡´ì„± í˜„ìƒì´ ë°œìƒí•  ë•Œ, package.jsonì— ëª…ì‹œí•˜ì§€ ì•Šì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¡°ìš©íˆ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ë‹¤ë¥¸ ì˜ì¡´ì„±ì„ package.json ì—ì„œ ì œê±°í–ˆì„ ë•Œ ì†Œë¦¬ì—†ì´ ê°™ì´ ì‚¬ë¼ì§€ê¸°ë„ í•©ë‹ˆë‹¤. ì´ëŸ° íŠ¹ì„±ì€ ì˜ì¡´ì„± ê´€ë¦¬ ì‹œìŠ¤í…œì„ í˜¼ë€ìŠ¤ëŸ½ê²Œ ë§Œë“­ë‹ˆë‹¤. â†’ yarn ì€ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ PnPë¥¼ ë„ì…í•¨

### **Dedupe (ì¤‘ë³µ ì œê±°)**

### ê°œë…

- `dedupe`ëŠ” ì´ë¯¸ ì„¤ì¹˜ëœ `node_modules`ë¥¼ ìŠ¤ìº”í•´ì„œ,
    
    **ë™ì¼í•œ ë²„ì „ ë²”ìœ„ ë‚´ì— ìˆëŠ” ì¤‘ë³µ íŒ¨í‚¤ì§€ë¥¼ ìµœëŒ€í•œ í•˜ë‚˜ë¡œ í†µì¼**í•˜ëŠ” ì‘ì—…ì´ì—ìš”.
    
- npm, Yarn, pnpm ëª¨ë‘ `npm dedupe`, `yarn dedupe` ê°™ì€ ëª…ë ¹ìœ¼ë¡œ ì œê³µ.
- íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ **ì •í™•íˆ ì˜›ë‚  ë²„ì „ë§Œ ì§€ì›**í•œë‹¤ë©´ í˜¸í™˜ì„± ê¹¨ì§ˆ ìˆ˜ ìˆìŒ.

### Override / Resolutions

**Overrides (npm)** / **Resolutions (Yarn)** ì€ í•˜ìœ„ ì˜ì¡´ì„±(íŠ¸ëœì§€í‹°ë¸Œ ë””íœë˜ì‹œ)ì´ **ì›í•˜ëŠ” ë²„ì „ì´ ì•„ë‹ ë•Œ, ê°•ì œë¡œ íŠ¹ì • ë²„ì „ì„ ì§€ì •**í•˜ëŠ” ê¸°ëŠ¥ì´ì—ìš”.

```jsx
{
"overrides": {
"minimist": "^1.2.8"
}
```

- ë³´ì•ˆ ì·¨ì•½ íŒ¨í‚¤ì§€ë¥¼ ê°•ì œë¡œ êµì²´.
- ë²„ì „ ì¶©ëŒ í•´ê²°.
- ì›ë˜ ì˜ì¡´ì„±ì´ ê¸°ëŒ€í•œ ë²„ì „ê³¼ ë‹¬ë¼ì„œ **ëŸ°íƒ€ì„ ì—ëŸ¬** ë°œìƒ ê°€ëŠ¥.
- ì„ì‹œë°©í¸ìœ¼ë¡œ ì“°ì´ëŠ” ê²½ìš°ê°€ ë§ìŒ â†’ ì¥ê¸°ì ìœ¼ë¡  ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—…ë°ì´íŠ¸ í•„ìš”.

# Hoisting vs Dedupe, ë­ê°€ ë‹¬ë¼?

- **Dedupe**: ê°™ì€ ë²„ì „ ì—¬ëŸ¬ ê°œë¥¼ **í•˜ë‚˜ë¡œ í†µì¼**í•˜ë ¤ëŠ” ì„ íƒ(ë²„ì „ ì„ íƒ ë¬¸ì œ).
- **Hoisting**: í†µì¼/ì„ íƒëœ íŒ¨í‚¤ì§€ë¥¼ **ì–´ë””ì— ë°°ì¹˜í• ì§€**(í´ë” êµ¬ì¡° ë¬¸ì œ).
    
    â†’ ë³´í†µ ë‘˜ì´ í•¨ê»˜ ì‘ë™í•´ ë²ˆë“¤ì„ ê°€ë³ê²Œ ë§Œë“­ë‹ˆë‹¤.
    

### Lockfile ìœ ì§€ (`package-lock.json`, `yarn.lock`, `pnpm-lock.yaml`)

- ì ê¸ˆ íŒŒì¼ì€ **ì„¤ì¹˜ ì‹œì ì˜ ë²„ì „ íŠ¸ë¦¬ ì „ì²´ë¥¼ ìŠ¤ëƒ…ìƒ·**ìœ¼ë¡œ ê¸°ë¡í•œ íŒŒì¼.
- ê°™ì€ `package.json`ì´ë¼ë„, ì ê¸ˆ íŒŒì¼ì´ ë‹¤ë¥´ë©´ ì„¤ì¹˜ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.
- lockfileì„ ë²„ì „ ê´€ë¦¬(Git)ì— í¬í•¨í•˜ë©´, íŒ€/ì„œë²„ ì–´ë””ì„œë“  **ë™ì¼í•œ ë²„ì „ íŠ¸ë¦¬**ë¥¼ ì¬í˜„ ê°€ëŠ¥.
- CI/CD, íŒ€ í™˜ê²½ì—ì„œ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì„¤ì¹˜ ê²°ê³¼ ë³´ì¥.
- ë³´ì•ˆ, í˜¸í™˜ì„± ë¬¸ì œë¥¼ ì¬í˜„í•˜ê³  ë””ë²„ê¹… ê°€ëŠ¥.
- ì˜¤ë˜ëœ lockfileì„ ë°©ì¹˜í•˜ë©´ **ì—…ë°ì´íŠ¸ê°€ ë°€ë ¤** ë³´ì•ˆ íŒ¨ì¹˜ê°€ ì•ˆ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŒ.
- ë”°ë¼ì„œ ì£¼ê¸°ì ìœ¼ë¡œ lockfileì„ ê°±ì‹ í•´ì•¼ í•¨ (`npm update`, `yarn upgrade`, Renovate ê°™ì€ ë´‡ í™œìš©).

| ê¸°ëŠ¥ | npm | Yarn | pnpm |
| --- | --- | --- | --- |
| **Hoisting** | ê¸°ë³¸ì ìœ¼ë¡œ ì ìš© (ë¶ˆì™„ì „, ì¶©ëŒ ìœ„í—˜ æœ‰) | v1: npmê³¼ ìœ ì‚¬ / v2+: PnP(ê°€ìƒ FS, no node_modules) | ìµœì†Œí™”, ì‹¤ì œ íŠ¸ë¦¬ë¥¼ ë°˜ì˜ (`.pnpm` êµ¬ì¡°), í•˜ë“œë§í¬ í™œìš© |
| **Dedupe** | `npm dedupe` ì œê³µ (ìˆ˜ë™) | ë³„ë„ íˆ´ í•„ìš” (v2+ëŠ” ìì²´ ìµœì í™”) | ì•„í‚¤í…ì²˜ ìì²´ê°€ dedupe ì§€í–¥, ê±°ì˜ ìë™ |
| **Overrides** | `overrides` (npm 8+) | `resolutions` (ë” ì„¸ë°€í•œ ë§¤ì¹­) | `overrides` (npmê³¼ ìœ ì‚¬) |
| **Lockfile** | `package-lock.json` (`npm ci` ì§€ì›) | `yarn.lock` (ì´ˆì°½ê¸°ë¶€í„°) | `pnpm-lock.yaml` (store ê¸°ë°˜, ê°€ì¥ ì¼ê´€ì„± ë†’ìŒ) |

âœ… **ì •ë¦¬**

- npmì€ â€œí‘œì¤€â€ë‹µê²Œ ì ì§„ì ìœ¼ë¡œ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ì™”ê³ , **ìµœê·¼ ë²„ì „ì—ì„œ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ ì§€ì›**.
- Yarnì€ **ë¹ ë¥¸ ì„¤ì¹˜, ì›Œí¬ìŠ¤í˜ì´ìŠ¤, resolutions**ìœ¼ë¡œ ì¸ê¸°ë¥¼ ì–»ì—ˆê³ , v2ë¶€í„°ëŠ” **PnP ë°©ì‹**ìœ¼ë¡œ ì°¨ë³„í™”.
- pnpmì€ **store + í•˜ë“œë§í¬ êµ¬ì¡°**ë¡œ ë””ìŠ¤í¬ ì ˆì•½ê³¼ dedupeì—ì„œ ê°€ì¥ ê°•ë ¥í•˜ë©°, ìµœê·¼ ëŒ€ê·œëª¨ monorepo í”„ë¡œì íŠ¸ì—ì„œ ê°ê´‘ë°›ëŠ” ì¤‘.

# Npm

- Node.jsì™€ í•¨ê»˜ ê¸°ë³¸ ì œê³µë˜ëŠ” **ê³µì‹ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**.
- 2010ë…„ëŒ€ ì´ˆë¶€í„° ì‚¬ì‹¤ìƒ JS ìƒíƒœê³„ì˜ í‘œì¤€ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ ìë¦¬ì¡ìŒ.

### íŠ¹ì§•

- **ê´‘ë²”ìœ„í•œ ì‚¬ìš©ìì¸µ**
    - Node ì„¤ì¹˜ ì‹œ ìë™ í¬í•¨ â†’ ì¶”ê°€ ì„¤ì¹˜ í•„ìš” ì—†ìŒ.
- **npm ë ˆì§€ìŠ¤íŠ¸ë¦¬**
    - ì„¸ê³„ ìµœëŒ€ ê·œëª¨ì˜ íŒ¨í‚¤ì§€ ì €ì¥ì†Œ ì œê³µ.
- **npm@5 ì´í›„ ë°œì „**
    - `package-lock.json` ë„ì… â†’ í™˜ê²½ ì¬í˜„ì„± ê°œì„ .
    - ì„¤ì¹˜ ì†ë„ ê°œì„  (ìºì‹œ, ë³‘ë ¬ ì„¤ì¹˜ ì¼ë¶€ ì§€ì›).
- **npm workspaces ì§€ì›**
    - Yarnì˜ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê¸°ëŠ¥ì„ ë°›ì•„ë“¤ì—¬ npm 7ë¶€í„° ì§€ì›.
- **ë³´ì•ˆ ë„êµ¬**
    - `npm audit` ëª…ë ¹ìœ¼ë¡œ ë³´ì•ˆ ì·¨ì•½ì  íƒì§€.

# Yarn

### ğŸ’¡ Yarnì„ ì„ íƒí•´ì•¼ í•˜ëŠ” ê²½ìš°

**ë¹ ë¥¸ ì„¤ì¹˜ ì†ë„**Â : yarnì˜ ë³‘ë ¬ ì„¤ì¹˜ì™€ ìºì‹± ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ë¹ ë¥¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¥¼ ì›í•  ë•Œ.

**ê²°ì •ë¡ ì  ì„¤ì¹˜**Â : yarnì˜ lock íŒŒì¼ì„ í†µí•´ í•­ìƒ ë™ì¼í•œ ì˜ì¡´ì„± íŠ¸ë¦¬ë¥¼ ë³´ì¥ë°›ê³  ì‹¶ì„ ë•Œ.

**ëª¨ë…¸ë ˆí¬ ì§€ì›**Â : yarnì˜ workspaces ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë¥¼ í•˜ë‚˜ì˜ ì €ì¥ì†Œì—ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ.

**ì•ˆì •ì„±**Â : yarnì˜ ë¬´ê²°ì„± ê²€ì‚¬ì™€ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì œí•œì„ í†µí•´ ë” ë†’ì€ ë³´ì•ˆê³¼ ì•ˆì •ì„±ì„ ì›í•  ë•Œ.

# Pnpm

- **ìœ ë ¹ ì˜ì¡´ì„±/hoisting ë¦¬ìŠ¤í¬ ìµœì†Œí™”ì˜ ì ˆëŒ€ê°’**: **Yarn PnP > pnpm > Yarn(node_modules) â‰ˆ npm**.
- **í˜„ì‹¤ì  ì¶”ì²œ**:
    - ìƒˆ ëª¨ë…¸ë ˆí¬Â·ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ì‹¬ â†’ **Yarn PnP**
    - FE ì•± ë‹¤ìˆ˜Â·í˜¸í™˜ì„±ë„ ì¤‘ìš” â†’ **pnpm + ìµœì†Œí•œì˜ public-hoist-pattern**
    - ë ˆê±°ì‹œ í˜¸í™˜ ìµœìš°ì„  â†’ **Yarn(node_modules) ë˜ëŠ” npm + ESLint ê·œì¹™ & CI ê³ ì •**